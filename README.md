# freight-transportation-api

## General
Проект представляет собой полноценное приложение для грузоперевозок, которое отклоняется от тестового задания. Это приложение обеспечивает основной жизненный цикл заказа на грузоперевозку, как показано ниже:

![freight_order_life_cycle_page-0001](https://github.com/restlifeness/freight-transportation-api/assets/134733009/f2b48a18-c633-43de-8e5d-983bbf08e8e4)

Приложение следует архитектуре REST API, с каждой конечной точкой предоставляющей доступ к определенной сущности. Отношения между сущностями выражаются через подмножества, как показано в @orders_router.get("users/{user_id}/orders").

Приложение использует паттерны "Репозиторий" и "Сервис" для создания абстракций на разных уровнях.

## Auth
Аутентификация осуществляется через токены JWT. Пакет werkzeug используется для удобной генерации хэшей и авторизации пользователей.

## Roles
API предоставляет разграничение доступа для просмотра и редактирования данных. Существуют три основных роли: CUSTOMER, MANAGER и ADMIN. Для обеспечения разграничения ролей в FastAPI используются зависимости: get_user_by_token, get_manager_by_token, get_admin_by_token. Роли автоматически создаются вместе с миграциями.

## Insurance
Страхование груза является отдельным сервисом и является необязательным элементом при формировании заказа. Тарифы на стоимость груза могут менять менеджеры и администраторы.

## Customers
Созданы модели для детализированных данных о заказчиках. Реализованы операции для создания и получения информации о заказчиках. Как только пользователь заполнил свои данные, ему автоматически присваивается роль заказчика.

## Orders
Заказы могут просматривать: заказчик - свои, менеджер - все. Заказы могут быть созданы и изменены.

## Trucks 
Модели для грузовиков созданы, но функции и логика обработки заказов для водителей грузовиков пока не реализованы.

## Deploy
Для развертывания используется Dockerfile, который создает образ с зависимостями. При запуске каждого нового контейнера выполняется скрипт для миграций и запуска приложения.

## Develop
Для разработки необходимо установить зависимости из файла requirements.txt, заполнить .env по образцу и запустить базу данных с помощью docker-compose up.
